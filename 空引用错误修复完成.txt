â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           NullReferenceException ç©ºå¼•ç”¨é”™è¯¯ä¿®å¤å®Œæˆ             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€é”™è¯¯è¯¦æƒ…ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. UIButton.Start() - ç¬¬22è¡Œ
   é”™è¯¯: RedPointManager.Instance ä¸º null

2. StaffsSinger.LocalGetStaff() - ç¬¬72è¡Œ
   é”™è¯¯: PersonSinger.Instance ä¸º null æˆ– staffDatas ä¸º null

3. StaffsSinger.OnGetStaffBack() - ç¬¬50è¡Œ
   é”™è¯¯: æœåŠ¡å™¨è¿”å› nullï¼Œååºåˆ—åŒ–å¤±è´¥

ã€é—®é¢˜åŸå› ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. åˆå§‹åŒ–é¡ºåºé—®é¢˜
   - RedPointManager åœ¨ MainCanvas UI ä¹‹åæ‰åˆ›å»º
   - UIButton çš„ Start() åœ¨ RedPointManager åˆ›å»ºä¹‹å‰è¢«è°ƒç”¨

2. å¼‚æ­¥å“åº”æ—¶åºé—®é¢˜
   - StaffsSinger.Init() å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®
   - æœåŠ¡å™¨å“åº”åˆ°è¾¾æ—¶ï¼Œåœºæ™¯å¯èƒ½è¿˜æ²¡å®Œå…¨åˆå§‹åŒ–
   - PersonSinger.Instance å¯èƒ½è¿˜æ²¡è®¾ç½®

3. æœåŠ¡å™¨è¿”å› null
   - é¦–æ¬¡åˆ›å»ºæ—¶ï¼ŒæœåŠ¡å™¨è¿”å› nullï¼ˆæ­£å¸¸ï¼‰
   - å®¢æˆ·ç«¯æ²¡æœ‰å¤„ç† null çš„æƒ…å†µ

ã€ä¿®å¤å†…å®¹ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä¿®å¤1: MainGameMode.cs - è°ƒæ•´åˆå§‹åŒ–é¡ºåº
  ä½ç½®: ç¬¬16-32è¡Œ
  ä¿®æ”¹: å°† RedPointManager åˆ›å»ºç§»åˆ° LoadUI ä¹‹å‰

  ä¿®æ”¹å‰:
    PersonSinger.Instance.Init();
    BagSinger.Instance.OnComplited = BuildSinger.Instance.Init;
    BuildSinger.Instance.OnComplited += StaffsSinger.Instance.Init;
    BagSinger.Instance.Init();
    uIFormBase = GameRoot.uISystem.LoadUI(...);  â† UIåˆ›å»º
    ...
    GameObject prefab_RedManager = ...;          â† RedPointManageråˆ›å»º
    RedManager = GameObject.Instantiate(...);

  ä¿®æ”¹å:
    PersonSinger.Instance.Init();

    // å…ˆåˆ›å»º RedPointManager
    GameObject prefab_RedManager = ...;          â† æå‰åˆ›å»º
    RedManager = GameObject.Instantiate(...);

    BagSinger.Instance.OnComplited = BuildSinger.Instance.Init;
    BuildSinger.Instance.OnComplited += StaffsSinger.Instance.Init;
    BagSinger.Instance.Init();
    uIFormBase = GameRoot.uISystem.LoadUI(...);  â† UIåˆ›å»º

ä¿®å¤2: UIButton.cs - æ·»åŠ ç©ºæ£€æŸ¥
  ä½ç½®: ç¬¬20-27è¡Œ
  ä¿®æ”¹: åœ¨ä½¿ç”¨ Instance å‰æ£€æŸ¥æ˜¯å¦ä¸º null

  ä¿®æ”¹å‰:
    private void Start()
    {
        RedPointManager.Instance.Regist(redPointEnum, this);
    }

    private void OnDestroy()
    {
        RedPointManager.Instance.UnRegist(redPointEnum);
    }

  ä¿®æ”¹å:
    private void Start()
    {
        if (RedPointManager.Instance != null)
        {
            RedPointManager.Instance.Regist(redPointEnum, this);
        }
    }

    private void OnDestroy()
    {
        if (RedPointManager.Instance != null)
        {
            RedPointManager.Instance.UnRegist(redPointEnum);
        }
    }

ä¿®å¤3: StaffsSinger.cs - ç­‰å¾… PersonSinger åˆå§‹åŒ–
  ä½ç½®: ç¬¬70-85è¡Œ
  ä¿®æ”¹: æ·»åŠ ç­‰å¾…æœºåˆ¶å’Œç©ºæ£€æŸ¥

  ä¿®æ”¹å‰:
    private async Task LocalGetStaff(List<StaffData> staffDatas)
    {
        PersonSinger.Instance.SetCurrentPerson(staffDatas.Count);
        characterControllder = ...

  ä¿®æ”¹å:
    private async Task LocalGetStaff(List<StaffData> staffDatas)
    {
        // ç­‰å¾… PersonSinger åˆå§‹åŒ–
        if (PersonSinger.Instance == null)
        {
            Debug.LogError("[StaffsSinger] PersonSinger.Instance is null, ç­‰å¾…åˆå§‹åŒ–...");
            while (PersonSinger.Instance == null)
            {
                await Task.Delay(100);
            }
            Debug.Log("[StaffsSinger] PersonSinger.Instance å·²å°±ç»ª");
        }

        PersonSinger.Instance.SetCurrentPerson(staffDatas?.Count ?? 0);

        // å¦‚æœæ²¡æœ‰å‘˜å·¥æ•°æ®ï¼Œç›´æ¥è¿”å›
        if (staffDatas == null || staffDatas.Count == 0)
        {
            Debug.Log("[StaffsSinger] æ²¡æœ‰å‘˜å·¥éœ€è¦åŠ è½½");
            loadCallBack?.Invoke();
            return;
        }

        characterControllder = ...

ä¿®å¤4: StaffsSinger.cs - å¤„ç†æœåŠ¡å™¨è¿”å› null
  ä½ç½®: ç¬¬47-65è¡Œ
  ä¿®æ”¹: æ·»åŠ  null æ£€æŸ¥å’Œå¼‚å¸¸å¤„ç†

  ä¿®æ”¹å‰:
    private async void OnGetStaffBack(Pkg pkg)
    {
        staffDatas = JsonConvert.DeserializeObject<List<StaffData>>(pkg.Body.serverMessage.JsonValue);
        await LocalGetStaff(staffDatas);
    }

  ä¿®æ”¹å:
    private async void OnGetStaffBack(Pkg pkg)
    {
        try
        {
            string jsonValue = pkg.Body.serverMessage.JsonValue;
            if (string.IsNullOrEmpty(jsonValue) || jsonValue == "null")
            {
                Debug.Log("[StaffsSinger] æ²¡æœ‰å‘˜å·¥æ•°æ®ï¼Œåˆå§‹åŒ–ä¸ºç©ºåˆ—è¡¨");
                staffDatas = new List<StaffData>();
            }
            else
            {
                staffDatas = JsonConvert.DeserializeObject<List<StaffData>>(jsonValue);
                if (staffDatas == null)
                {
                    staffDatas = new List<StaffData>();
                }
            }

            await LocalGetStaff(staffDatas);
        }
        catch (Exception ex)
        {
            Debug.LogError($"[StaffsSinger] OnGetStaffBack å¼‚å¸¸: {ex.Message}");
            staffDatas = new List<StaffData>();
            loadCallBack?.Invoke();
        }
    }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€ä¿®å¤åçš„æµç¨‹ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. è¿›å…¥ MainGameMode
   â†“
2. PersonSinger.Instance.Init() âœ“
   â†“
3. åˆ›å»º RedPointManager âœ“
   â†“
4. åŠ è½½ MainCanvas UI
   â†“
5. UIButton.Start() è°ƒç”¨
   â†’ RedPointManager.Instance != null âœ“
   â†’ æˆåŠŸæ³¨å†Œçº¢ç‚¹
   â†“
6. StaffsSinger.Init() å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®
   â†“
7. æœåŠ¡å™¨è¿”å›å“åº”ï¼ˆå¯èƒ½æ˜¯ nullï¼‰
   â†“
8. OnGetStaffBack å¤„ç†å“åº”
   â†’ æ£€æŸ¥ jsonValue æ˜¯å¦ä¸º null âœ“
   â†’ åˆ›å»ºç©ºåˆ—è¡¨æˆ–ååºåˆ—åŒ–æ•°æ® âœ“
   â†“
9. LocalGetStaff å¤„ç†æ•°æ®
   â†’ ç­‰å¾… PersonSinger.Instance å°±ç»ª âœ“
   â†’ æ£€æŸ¥ staffDatas æ˜¯å¦ä¸ºç©º âœ“
   â†’ åŠ è½½å‘˜å·¥æˆ–è·³è¿‡ âœ“

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€æµ‹è¯•æ­¥éª¤ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. å¯åŠ¨æœåŠ¡ç«¯
   Visual Studio æŒ‰ F5

2. å¯åŠ¨å®¢æˆ·ç«¯
   Unity è¿è¡Œæ¸¸æˆ

3. TapTap ç™»å½•
   ç‚¹å‡»ç™»å½•æŒ‰é’®

4. éªŒè¯ç»“æœ
   âœ“ æ²¡æœ‰ NullReferenceException é”™è¯¯
   âœ“ æˆåŠŸæ˜¾ç¤º"å¼€å§‹æ¸¸æˆ"æŒ‰é’®
   âœ“ ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"è¿›å…¥ä¸»åœºæ™¯
   âœ“ æ²¡æœ‰ç©ºå¼•ç”¨é”™è¯¯

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€é¢„æœŸæ—¥å¿—ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Unity æ§åˆ¶å°:
  [StaffsSinger] æ²¡æœ‰å‘˜å·¥æ•°æ®ï¼Œåˆå§‹åŒ–ä¸ºç©ºåˆ—è¡¨
  [StaffsSinger] æ²¡æœ‰å‘˜å·¥éœ€è¦åŠ è½½

æœåŠ¡ç«¯æ§åˆ¶å°:
  [GameServer] CheckPlayerCreatByFirst - ç©å®¶: xxx, é¦–æ¬¡åˆ›å»º: True
  [GameServer] GetJson Hash - Key: persons, Field: persons, Value: null
  [GameServer] ç©å®¶åŠ å…¥: xxx, åœ¨çº¿äººæ•°: 1

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€ä¿®æ”¹çš„æ–‡ä»¶ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å®¢æˆ·ç«¯:
  âœ“ Logic\Mode\MainGameMode.cs           (åˆå§‹åŒ–é¡ºåº)
  âœ“ Logic\UI\UIButton\UIButton.cs        (ç©ºæ£€æŸ¥)
  âœ“ Logic\Singer\StaffsSinger.cs         (å¼‚æ­¥ç­‰å¾…å’Œç©ºæ£€æŸ¥)

æœåŠ¡ç«¯:
  âœ“ Servc\GameServer.cs                  (å·²ä¿®å¤ JsonDicKey)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€å…³é”®æ”¹è¿›ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. åˆå§‹åŒ–é¡ºåºä¼˜åŒ–
   - RedPointManager åœ¨æ‰€æœ‰ UI ä¹‹å‰åˆ›å»º
   - é¿å… UI ç»„ä»¶æ‰¾ä¸åˆ°ç®¡ç†å™¨

2. é˜²å¾¡æ€§ç¼–ç¨‹
   - æ‰€æœ‰ Instance ä½¿ç”¨å‰æ£€æŸ¥ null
   - æ‰€æœ‰æœåŠ¡å™¨å“åº”æ£€æŸ¥ null
   - æ‰€æœ‰å¼‚æ­¥æ“ä½œæ·»åŠ å¼‚å¸¸å¤„ç†

3. å¼‚æ­¥åŒæ­¥
   - ä½¿ç”¨ await Task.Delay ç­‰å¾…ä¾èµ–åˆå§‹åŒ–
   - é¿å…å¼‚æ­¥ç«äº‰æ¡ä»¶

4. ç©ºæ•°æ®å¤„ç†
   - æœåŠ¡å™¨è¿”å› null æ—¶åˆ›å»ºç©ºåˆ—è¡¨
   - ç©ºåˆ—è¡¨æ—¶è·³è¿‡åŠ è½½é€»è¾‘

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€æ€»ç»“ã€‘

é—®é¢˜: å¤šå¤„ç©ºå¼•ç”¨é”™è¯¯
åŸå› : åˆå§‹åŒ–é¡ºåºå’Œå¼‚æ­¥æ—¶åºé—®é¢˜
ä¿®å¤: è°ƒæ•´é¡ºåº + ç©ºæ£€æŸ¥ + å¼‚æ­¥ç­‰å¾…
çŠ¶æ€: âœ… å·²å…¨éƒ¨ä¿®å¤

ç°åœ¨å¯ä»¥æ­£å¸¸ç™»å½•å¹¶è¿›å…¥æ¸¸æˆäº†ï¼ğŸ‰

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          åœºæ™¯åŠ è½½å¡ä½å’Œç©ºå¼•ç”¨é”™è¯¯ä¿®å¤å®Œæˆ                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€é—®é¢˜æè¿°ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. GameMainMenuUI.OnOpen() - ç¬¬16è¡Œ
   é”™è¯¯: currentCompany ä¸º null
   ç°è±¡: åŠ è½½ä¸»åœºæ™¯æ—¶å´©æºƒ

2. InputMotion.RoateCallBack() - ç¬¬31è¡Œ
   é”™è¯¯: Camera.main ä¸º null
   ç°è±¡: åœºæ™¯åˆ‡æ¢æ—¶å´©æºƒ

3. åœºæ™¯åŠ è½½å¡ä½
   ç°è±¡: ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"åï¼Œå¡åœ¨åŠ è½½é¡µé¢ä¸åŠ¨

ã€é—®é¢˜åŸå› ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. currentCompany ä¸º null
   - é¦–æ¬¡åˆ›å»ºæ—¶ï¼ŒæœåŠ¡å™¨è¿”å› nullï¼ˆå› ä¸ºè¿˜æ²¡ä¿å­˜å…¬å¸æ•°æ®ï¼‰
   - UserData.GetCompanyBack() æ²¡æœ‰å¤„ç† null çš„æƒ…å†µ
   - currentCompany ä¿æŒä¸º null
   - GameMainMenuUI.OnOpen() å°è¯•è®¿é—® currentCompany.All_saveMoney å¯¼è‡´ç©ºå¼•ç”¨

2. Camera.main ä¸º null
   - åœºæ™¯åˆ‡æ¢æ—¶ï¼Œæ—§åœºæ™¯çš„ç›¸æœºè¢«é”€æ¯
   - æ–°åœºæ™¯çš„ç›¸æœºè¿˜æ²¡åˆå§‹åŒ–
   - InputMotion çš„æ‰‹åŠ¿å›è°ƒè¢«è§¦å‘æ—¶ï¼ŒCamera.main ä¸º null

3. åœºæ™¯åŠ è½½å¡ä½
   - MainGameMode.OnEnter() æŠ›å‡ºå¼‚å¸¸
   - å¼‚å¸¸å¯¼è‡´ SceneProgressUIForm.instance.EnableAllowLoad() æ²¡æœ‰æ‰§è¡Œ
   - åŠ è½½æ¡ä¸ä¼šæ¶ˆå¤±ï¼Œåœºæ™¯å¡ä½

ã€ä¿®å¤å†…å®¹ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä¿®å¤1: UserData.cs - åˆ›å»ºé»˜è®¤å…¬å¸
  ä½ç½®: ç¬¬92-99è¡Œ (GetCompanyBack æ–¹æ³•)
  ä¿®æ”¹: åœ¨æœåŠ¡å™¨è¿”å› null æ—¶ï¼Œåˆ›å»ºé»˜è®¤å…¬å¸å¹¶ä¿å­˜

  ä¿®æ”¹å‰:
    private void GetCompanyBack(Pkg pkg)
    {
        string json = pkg.Body.serverMessage.JsonValue;
        if (!string.IsNullOrEmpty(json))
        {
            currentCompany = JsonConvert.DeserializeObject<CompanyClass>(json);
        }
    }

  ä¿®æ”¹å:
    private void GetCompanyBack(Pkg pkg)
    {
        string json = pkg.Body.serverMessage.JsonValue;
        if (!string.IsNullOrEmpty(json) && json != "null")
        {
            currentCompany = JsonConvert.DeserializeObject<CompanyClass>(json);
        }
        else
        {
            // é¦–æ¬¡åˆ›å»ºæˆ–æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ›å»ºé»˜è®¤å…¬å¸
            Debug.Log("åˆ›å»ºé»˜è®¤å…¬å¸æ•°æ®");
            currentCompany = new CompanyClass
            {
                CompName = UserName + "çš„å…¬å¸",
                CEO_ID = UserID,
                personCount_Company = 0,
                All_saveMoney = 0f,
                CreatTime = System.DateTime.Now,
                jobs = new List<string>(),
                isListed = false,
                LendMoney = 0f,
                stocks = new List<Stock>()
            };
            // ä¿å­˜é»˜è®¤å…¬å¸æ•°æ®
            SaveCompany();
        }
    }

ä¿®å¤2: GameMainMenuUI.cs - æ·»åŠ ç©ºæ£€æŸ¥
  ä½ç½®: ç¬¬11-29è¡Œ (OnOpen æ–¹æ³•)
  ä¿®æ”¹: åœ¨è®¿é—® currentCompany å‰æ£€æŸ¥æ˜¯å¦ä¸º null

  ä¿®æ”¹å‰:
    protected override void OnOpen()
    {
        base.OnOpen();
        PlayerCanvas.RegistMainCanvas(this);
        audioPlayer = GameRoot.audioSystem.GeneratedAudioPlayer(...);
        Moneytext.text = $"${PlayerInformation.currentUserData.currentCompany.All_saveMoney}w";
        PlayerInformation.currentUserData.MoneyChanged += OnUserDataChanged;

  ä¿®æ”¹å:
    protected override void OnOpen()
    {
        base.OnOpen();
        PlayerCanvas.RegistMainCanvas(this);
        audioPlayer = GameRoot.audioSystem.GeneratedAudioPlayer(...);

        // æ£€æŸ¥ currentCompany æ˜¯å¦ä¸ºç©º
        if (PlayerInformation.currentUserData?.currentCompany != null)
        {
            Moneytext.text = $"${PlayerInformation.currentUserData.currentCompany.All_saveMoney}w";
        }
        else
        {
            Debug.LogError("[GameMainMenuUI] currentCompany ä¸ºç©ºï¼");
            Moneytext.text = "$0w";
        }

        PlayerInformation.currentUserData.MoneyChanged += OnUserDataChanged;

ä¿®å¤3: InputMotion.cs - æ·»åŠ  Camera.main ç©ºæ£€æŸ¥
  ä½ç½®: ç¬¬26-32è¡Œ (RoateCallBack æ–¹æ³•)
  ä¿®æ”¹: åœ¨ä½¿ç”¨ Camera.main å‰æ£€æŸ¥æ˜¯å¦ä¸º null

  ä¿®æ”¹å‰:
    public void RoateCallBack(GestureRecognizer gesture)
    {
        if (isLocked)
            return;
        RotateGestureRecognizer rotateGestureRecognizer=gesture as RotateGestureRecognizer;
        Camera.main.transform.Rotate(Vector3.up, rotateGestureRecognizer.RotationDegreesDelta,Space.World);
    }

  ä¿®æ”¹å:
    public void RoateCallBack(GestureRecognizer gesture)
    {
        if (isLocked || Camera.main == null)
            return;
        RotateGestureRecognizer rotateGestureRecognizer=gesture as RotateGestureRecognizer;
        Camera.main.transform.Rotate(Vector3.up, rotateGestureRecognizer.RotationDegreesDelta,Space.World);
    }

ä¿®å¤4: MainGameMode.cs - æ·»åŠ å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—
  ä½ç½®: ç¬¬8-34è¡Œ (OnEnter æ–¹æ³•)
  ä¿®æ”¹: ç”¨ try-catch-finally åŒ…è£¹åˆå§‹åŒ–ä»£ç ï¼Œç¡®ä¿åœºæ™¯åŠ è½½å®Œæˆ

  ä¿®æ”¹å‰:
    public override void OnEnter()
    {
        // å„ç§åˆå§‹åŒ–ä»£ç ...
        SceneProgressUIForm.instance.EnableAllowLoad();
    }

  ä¿®æ”¹å:
    public override void OnEnter()
    {
        Debug.Log("[MainGameMode] å¼€å§‹è¿›å…¥ä¸»æ¸¸æˆæ¨¡å¼");
        try
        {
            // å„ç§åˆå§‹åŒ–ä»£ç ...
        }
        catch (System.Exception ex)
        {
            Debug.LogError($"[MainGameMode] OnEnter å¼‚å¸¸: {ex.Message}\n{ex.StackTrace}");
        }
        finally
        {
            // æ— è®ºæ˜¯å¦å‡ºé”™ï¼Œéƒ½è¦å…è®¸åœºæ™¯åŠ è½½å®Œæˆ
            Debug.Log("[MainGameMode] å…è®¸åœºæ™¯åŠ è½½å®Œæˆ");
            if (SceneProgressUIForm.instance != null)
            {
                SceneProgressUIForm.instance.EnableAllowLoad();
            }
        }
    }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€ä¿®å¤åçš„æµç¨‹ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. ç©å®¶ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"
   â†“
2. å¼€å§‹åŠ è½½ä¸»åœºæ™¯
   â†“
3. MainGameMode.OnEnter() æ‰§è¡Œ
   â†“
4. å°è¯•åˆå§‹åŒ–å„ä¸ªç³»ç»Ÿ
   â†’ å¦‚æœå‡ºé”™ï¼Œæ•è·å¼‚å¸¸å¹¶è®°å½•æ—¥å¿—
   â†“
5. finally å—ç¡®ä¿æ‰§è¡Œ EnableAllowLoad()
   â†“
6. åŠ è½½æ¡æ¶ˆå¤±ï¼Œåœºæ™¯åŠ è½½å®Œæˆ âœ“
   â†“
7. GameMainMenuUI.OnOpen() æ‰§è¡Œ
   â†’ æ£€æŸ¥ currentCompany æ˜¯å¦ä¸º null
   â†’ å¦‚æœä¸º nullï¼Œæ˜¾ç¤º "$0w"
   â†’ å¦‚æœä¸ä¸º nullï¼Œæ˜¾ç¤ºå®é™…é‡‘é¢ âœ“
   â†“
8. ä¸»åœºæ™¯æ­£å¸¸æ˜¾ç¤º âœ“

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€æµ‹è¯•æ­¥éª¤ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. å¯åŠ¨æœåŠ¡ç«¯
   Visual Studio æŒ‰ F5

2. å¯åŠ¨å®¢æˆ·ç«¯
   Unity è¿è¡Œæ¸¸æˆ

3. TapTap ç™»å½•
   ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼Œå®Œæˆç™»å½•

4. å¼€å§‹æ¸¸æˆ
   ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®

5. éªŒè¯ç»“æœ
   âœ“ æ²¡æœ‰ NullReferenceException é”™è¯¯
   âœ“ åŠ è½½æ¡æ­£å¸¸æ˜¾ç¤ºå’Œæ¶ˆå¤±
   âœ“ æˆåŠŸè¿›å…¥ä¸»åœºæ™¯
   âœ“ UI æ­£å¸¸æ˜¾ç¤ºï¼Œé‡‘é¢æ˜¾ç¤ºä¸º "$0w" æˆ–å®é™…é‡‘é¢

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€é¢„æœŸæ—¥å¿—ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Unity æ§åˆ¶å°:
  [MainGameMode] å¼€å§‹è¿›å…¥ä¸»æ¸¸æˆæ¨¡å¼
  [MainGameMode] å¼€å§‹åŠ è½½ä¸»ç•Œé¢UI
  [MainGameMode] æ‰“å¼€ä¸»ç•Œé¢UI
  åˆ›å»ºé»˜è®¤å…¬å¸æ•°æ®
  [MainGameMode] å…è®¸åœºæ™¯åŠ è½½å®Œæˆ

æœåŠ¡ç«¯æ§åˆ¶å°:
  [GameServer] ç©å®¶åŠ å…¥: xxx, å…¬å¸: xxxçš„å…¬å¸, åœ¨çº¿äººæ•°: 1
  [GameServer] SetJson Hash - Key: company, Field: xxx, Value: {"CompName":"xxxçš„å…¬å¸",...}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€ä¿®æ”¹çš„æ–‡ä»¶ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å®¢æˆ·ç«¯:
  âœ“ SetUp\Class\UserData.cs              (åˆ›å»ºé»˜è®¤å…¬å¸)
  âœ“ Logic\UI\GameMainMenuUI.cs           (ç©ºæ£€æŸ¥)
  âœ“ Logic\Tool\InputMotion.cs            (ç›¸æœºç©ºæ£€æŸ¥)
  âœ“ Logic\Mode\MainGameMode.cs           (å¼‚å¸¸å¤„ç†)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€å…³é”®æ”¹è¿›ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. æ•°æ®åˆå§‹åŒ–
   - é¦–æ¬¡åˆ›å»ºæ—¶è‡ªåŠ¨åˆ›å»ºé»˜è®¤å…¬å¸æ•°æ®
   - é¿å… currentCompany ä¸º null

2. é˜²å¾¡æ€§ç¼–ç¨‹
   - æ‰€æœ‰å…³é”®å¯¹è±¡è®¿é—®å‰æ£€æŸ¥ null
   - åœºæ™¯ç›¸å…³ä»£ç æ£€æŸ¥ Camera.main

3. å¼‚å¸¸å¤„ç†
   - ç”¨ try-catch-finally åŒ…è£¹åˆå§‹åŒ–ä»£ç 
   - ç¡®ä¿å…³é”®ä»£ç ï¼ˆEnableAllowLoadï¼‰ä¸€å®šæ‰§è¡Œ

4. è°ƒè¯•æ—¥å¿—
   - æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
   - æ–¹ä¾¿æ’æŸ¥åˆå§‹åŒ–è¿‡ç¨‹ä¸­çš„é—®é¢˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€æ€»ç»“ã€‘

é—®é¢˜: å¤šå¤„ç©ºå¼•ç”¨ + åœºæ™¯åŠ è½½å¡ä½
åŸå› : æ•°æ®æœªåˆå§‹åŒ– + å¼‚å¸¸é˜»æ­¢å…³é”®ä»£ç æ‰§è¡Œ
ä¿®å¤: é»˜è®¤æ•°æ® + ç©ºæ£€æŸ¥ + å¼‚å¸¸å¤„ç†
çŠ¶æ€: âœ… å·²å…¨éƒ¨ä¿®å¤

ç°åœ¨å¯ä»¥æ­£å¸¸è¿›å…¥ä¸»æ¸¸æˆåœºæ™¯äº†ï¼ğŸ‰
